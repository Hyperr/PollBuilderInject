!function(){function t(){var t=document.querySelectorAll(".covet-pics-gallery");if(t.length>0)for(var s=0,d=t.length;s<d;s++)if("undefined"!=typeof t[s].CovetPics){t[s].CovetPics}else{new o({el:t[s]})}else if(e("covet-pics-request")){new c({el:document.body})}if(e("covet-pics-photo-id")){new n({el:document.body})}if("undefined"!=typeof Shopify&&Shopify.checkout&&Shopify.checkout.order_id&&Shopify.Checkout.OrderStatus&&Shopify.shop&&i("covet-conversion-tracked")!=Shopify.checkout.order_id){var a="";Array.prototype.forEach.call(Shopify.checkout.line_items,function(t){a=a+t.product_id+","});var p=encodeURI("https://shopify.covet.pics/tracking?shop_domain="+Shopify.shop+"&order_id="+Shopify.checkout.order_id+"&total="+Shopify.checkout.total_price+"&products="+a),l=new XMLHttpRequest;l.open("GET",p,!0),l.withCredentials=!0,l.onload=function(){if(l.status>=200&&l.status<400){var t,e=Shopify.checkout.order_id,o=new Date;o.setTime(o.getTime()+24*3650*60*60*1e3),t="; expires="+o.toGMTString(),document.cookie="covet-conversion-tracked"+"="+e+t+"; path=/"}},l.send()}}var e=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),c=o.exec(e);return c?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null},o=function(t){var o,n,i,s,d,a,p,l,r,u,h,m=this,g=[];this.loadedAt=Date.now();var f=function(t,e){var o=e||document,c=o.querySelector(t);return c||(this.error=!0,console.error(t+" not found in document."))},v=function(t){t.wrap?(u=t.wrap,a=f(u)):t.el&&(a=t.el)},y=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},w=function(t){var e="";for(var o in t)t.hasOwnProperty(o)&&(e.length>0&&(e+="&"),e+=encodeURI(o+"="+t[o]));return e},b={addToCart:function(t,e){var o=new XMLHttpRequest;o.open("POST","/cart/add.js",!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onload=function(){if(o.status>=200&&o.status<400){var t=JSON.parse(o.responseText);l.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"addedToCart","covetpics-msg-data":t},"*");var e=new XMLHttpRequest;e.open("GET","/cart.js",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.onload=function(){if(e.status>=200&&e.status<400){var t=JSON.parse(e.responseText);l.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"cartData","covetpics-msg-data":t},"*")}},e.send()}},o.send(w({quantity:1,id:e}))},hideTitle:function(t,e){for(var o=document.querySelectorAll(e),c=0,n=o.length;c<n;c++)o[c].style.display="none";a.style.display="none"},setFullScreenHeight:function(){a.style.height=y()+"px"},setHeight:function(t,e){a.style.height=e+"px",p.style.height=y()+"px",l.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"recalcModalLayout","covetpics-msg-data":e},"*")},setScroll:function(){scrollTo(0,h)},openModal:function(t,e){p.style.height=y()+"px",p.style.display="block",l.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"readyToOpenModal","covetpics-msg-data":e},"*"),l.contentWindow.focus()},closeModal:function(t){p.style.display="none",t.source.postMessage({covetpics:!0,"covetpics-msg":"closeModalComplete","covetpics-msg-data":!0},"*")},loadNewPage:function(t,e){l.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"newPage","covetpics-msg-data":e},"*")},attachModalClickEvents:function(t,e){d.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"attachModalClickEvents","covetpics-msg-data":e},"*")},createUploadWidget:function(t,o){if(o.customer_photo_item_postion>0||e("covet-pics-request")){new c({el:document.body})}},openUploadWidget:function(t,e){document.body.CovetPicsCustomerPhotosUpload.openUpload(e.gallery,e.product,null)}},x=function(){null==a.getAttribute("data-id")?(-1!==window.location.pathname.indexOf("/products/")?(n=window.location.pathname.match(/\/products\/([a-z0-9\-]+)/)[1],i=window.location.hostname):(n=a.getAttribute("data-product"),i=a.getAttribute("data-shop")),s="https://shopify.covet.pics/widget/shop/"+i+"/product/"+n,r="https://shopify.covet.pics/widget/modal/shop/"+i+"/product/"+n):(n=a.getAttribute("data-id"),s="https://shopify.covet.pics/widget/gallery/"+n,r="https://shopify.covet.pics/widget/gallery/modal/"+n),o="covetpics-wrap-iframe-"+n,d=document.createElement("iframe"),d.style.width="100%",d.style.maxWidth="100%",d.style.height="100%",d.setAttribute("frameborder","0"),d.setAttribute("scrolling","no"),d.setAttribute("src",s),d.setAttribute("id",o),a.appendChild(d);for(var t=a.parentNode;t&&t.tagName;)g.unshift(t),t=t.parentNode;p=document.createElement("div"),p.setAttribute("id","covet-pics-wrap-modal"),p.style.display="none",p.style.position="fixed",p.style.top="0px",p.style.left="0px",p.style.width="100%",p.style.zIndex="2147483647",p.style.overflow="hidden",l=document.createElement("iframe"),l.style.width="100%",l.style.maxWidth="100%",l.style.height="100%",l.setAttribute("frameborder","0"),l.setAttribute("scrolling","no"),l.setAttribute("src",r),l.onload=function(){l.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"modalFrameLoaded","covetpics-msg-data":document.location.pathname},"*")},p.appendChild(l),document.body.appendChild(p)},M=function(){window.addEventListener("message",function(t){try{~t.origin.indexOf("https://shopify.covet.pics")&&(l.contentWindow!=t.source&&d.contentWindow!=t.source||1==t.data.covetpics&&b[t.data["covetpics-msg"]](t,t.data["covetpics-msg-data"]))}catch(t){console.log(t)}})},C=function(){v(t),x(),M(),a.CovetPics=m};this.publicMethod=function(){return g},C()},c=function(t){var e,o,c,n,i=this,s=function(t){t.wrap?(wrapId=t.wrap,e=_getNode(wrapId)):t.el&&(e=t.el)},d=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},a=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),c=o.exec(e);return c?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null},p={uploadWidgetReady:function(){a("covet-pics-request")&&i.openUpload("",a("covet-pics-product"),a("covet-pics-request"))},setHeight:function(t,e){o.style.height=d()+"px",c.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"recalcModalLayout","covetpics-msg-data":e},"*")},setScroll:function(){scrollTo(0,offsetTop)},closeModal:function(t){o.style.display="none",t.source.postMessage({covetpics:!0,"covetpics-msg":"closeModalComplete","covetpics-msg-data":!0},"*")},openPhotoUpload:function(t,e){o.style.height=d()+"px",o.style.display="block",c.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"openPhotoUpload","covetpics-msg-data":e},"*"),c.contentWindow.focus()}},l=function(){n=document.body.getAttribute("data-covet-shop")?document.body.getAttribute("data-covet-shop"):window.location.hostname,modalUrl="https://shopify.covet.pics/widget/show_customer_photo_widget/"+n,o=document.createElement("div"),o.setAttribute("id","covet-pics-wrap-customer-photo"),o.style.display="none",o.style.position="fixed",o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.zIndex="2147483647",o.style.overflow="hidden",c=document.createElement("iframe"),c.style.width="100%",c.style.maxWidth="100%",c.style.height="100%",c.setAttribute("frameborder","0"),c.setAttribute("scrolling","no"),c.setAttribute("src",modalUrl),c.onload=function(){c.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"modalFrameLoaded","covetpics-msg-data":document.location.pathname},"*")},o.appendChild(c),document.body.appendChild(o)},r=function(){window.addEventListener("message",function(t){try{~t.origin.indexOf("https://shopify.covet.pics")&&c.contentWindow==t.source&&1==t.data.covetpics&&p[t.data["covetpics-msg"]](t,t.data["covetpics-msg-data"])}catch(t){console.log(t)}})},u=function(){s(t),l(),r(),e.CovetPicsCustomerPhotosUpload=i};this.openUpload=function(t,e,n){o.style.height=d()+"px",o.style.display="block",c.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"openPhotoUpload","covetpics-msg-data":{gallery_id:t,product_handle:e,photo_request:n}},"*"),c.contentWindow.focus()},u()},n=function(t){var e,o,c,n,i,s=this,d=function(t){t.wrap?(wrapId=t.wrap,e=_getNode(wrapId)):t.el&&(e=t.el)},a=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},p=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),c=o.exec(e);return c?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null},l={setHeight:function(t,e){o.style.height=a()+"px",c.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"recalcModalLayout","covetpics-msg-data":e},"*")},setScroll:function(){scrollTo(0,offsetTop)},closeModal:function(t){o.style.display="none",t.source.postMessage({covetpics:!0,"covetpics-msg":"closeModalComplete","covetpics-msg-data":!0},"*")}},r=function(){modalUrl="https://shopify.covet.pics/photo/"+n+"/"+i,o=document.createElement("div"),o.setAttribute("id","covet-pics-wrap-photo"),o.style.display="none",o.style.position="fixed",o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.zIndex="2147483647",o.style.overflow="hidden",c=document.createElement("iframe"),c.style.width="100%",c.style.maxWidth="100%",c.style.height="100%",c.setAttribute("frameborder","0"),c.setAttribute("scrolling","no"),c.setAttribute("src",modalUrl),c.onload=function(){c.contentWindow.postMessage({covetpics:!0,"covetpics-msg":"modalFrameLoaded","covetpics-msg-data":document.location.pathname},"*")},o.appendChild(c),document.body.appendChild(o)},u=function(){window.addEventListener("message",function(t){try{~t.origin.indexOf("https://shopify.covet.pics")&&c.contentWindow==t.source&&1==t.data.covetpics&&l[t.data["covetpics-msg"]](t,t.data["covetpics-msg-data"])}catch(t){console.log(t)}})};!function(){d(t),p("covet-pics-photo-id")&&p("covet-pics-embed-id")&&(i=p("covet-pics-photo-id"),n=p("covet-pics-embed-id"),r(),u(),o.style.height=a()+"px",o.style.display="block",c.contentWindow.focus()),e.CovetPicsPhoto=s}()},i=function(t){for(var e=t+"=",o=document.cookie.split(";"),c=0;c<o.length;c++){for(var n=o[c];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null};"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t,!1)}();