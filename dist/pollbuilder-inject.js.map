{"version":3,"sources":["webpack:///webpack/bootstrap c453bf597dd6e515467e","webpack:///./src/index.js","webpack:///./~/url-toolkit/src/url-toolkit.js","webpack:///(webpack)/buildin/module.js"],"names":["PollBuilderInject","requirements","itemSelector","logic","intvl","Array","isArray","some","document","querySelector","sel","items","item","querySelectorAll","Error","_mapped","indexOf","push","clearInterval","_interval","setInterval","map","console","log","_buttonUpdateSelector","autoHideButtons","pollBuilder","addButtons","token","options","callback","script","createElement","type","async","addEventListener","embedSticky","src","getElementsByTagName","appendChild","elem","image","link","obj","setAttribute","JSON","stringify","child","check","hasAttribute","url","buildAbsoluteURL","location","href","element","comp","window","getComputedStyle","getPropertyValue","bg","replace","img","lnk","button","innerHTML","evt","preventDefault","s","style","cursor","padding","transition","opacity","pointerEvents","fontSize","color","background","whiteSpace","addDataElement","btns","autoUpdate","prototype","slice","call","NodeList","_buttons","mergeArrays","_buttonsListening","_buttonsShowing","a1","a2","a","concat","i","length","j","splice","root","URL_REGEX","FIRST_SEGMENT_REGEX","SLASH_DOT_REGEX","SLASH_DOT_DOT_REGEX","URLToolkit","baseURL","relativeURL","opts","trim","alwaysNormalize","basePartsForNormalise","parseURL","baseParts","path","normalizePath","buildURLFromParts","relativeParts","scheme","netLoc","pathParts","exec","builtParts","params","query","fragment","baseURLPath","newPath","substring","lastIndexOf","parts","split","reverse","join","exports","module","webpackPolyfill","deprecate","paths","children"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACpCA;;;;;;AAMA;;;;;;;;KAEMA,iB;;;;;;;;AAEL;;;uBAGWC,Y,EAAcC,Y,EAAcC,K,EAAOC,K,EAC9C;AACC;AACA,QAAIC,MAAMC,OAAN,CAAcL,YAAd,CAAJ,EAAiC;AAChC,SAAI,CAACA,aAAaM,IAAb,CAAkBC,SAASC,aAAT,CAAuBC,GAAvB,CAAlB,CAAL,EACC,OAAO,KAAP;AACD,KAHD,MAGO,IAAI,OAAOT,YAAP,KAAwB,UAA5B,EAAwC;AAC9C,SAAI,CAACA,cAAL,EACC,OAAO,KAAP;AACD,KAHM,MAGA,IAAI,OAAOA,YAAP,KAAwB,QAA5B,EAAsC;AAC5C,SAAI,CAACO,SAASC,aAAT,CAAuBR,YAAvB,CAAL,EACC,OAAO,KAAP;AACD,KAHM,MAGA;AACN,SAAI,CAACA,YAAL,EACC,OAAO,KAAP;AACD;;AAED;AACA,QAAIU,KAAJ,EAAWC,IAAX;AACA,QAAIP,MAAMC,OAAN,CAAcJ,YAAd,CAAJ,EACCS,QAAQT,YAAR,CADD,KAEK,IAAI,OAAOA,YAAP,KAAwB,UAA5B,EACJS,QAAQT,cAAR,CADI,KAEA,IAAI,OAAOA,YAAP,KAAwB,QAA5B,EACJS,QAAQH,SAASK,gBAAT,CAA0BX,YAA1B,CAAR,CADI,KAGJ,MAAM,IAAIY,KAAJ,CAAU,6BAAV,CAAN;;AAED;AA3BD;AAAA;AAAA;;AAAA;AA4BC,0BAAaH,KAAb,8HAAoB;AAAfC,UAAe;;AACnB,UAAIZ,kBAAkBe,OAAlB,CAA0BC,OAA1B,CAAkCJ,IAAlC,IAA0C,CAA9C,EAAiD;AAChDZ,yBAAkBe,OAAlB,CAA0BE,IAA1B,CAA+BL,IAA/B;AACAT,aAAMS,IAAN;AACA;AACD;;AAED;AACA;AACA;AArCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAsCC,QAAIR,KAAJ,EAAW;AACVc,mBAAclB,kBAAkBmB,SAAhC;AACAnB,uBAAkBmB,SAAlB,GAA8BC,YAAY,YAAI;AAC7CpB,wBAAkBqB,GAAlB,CAAsBpB,YAAtB,EAAoCC,YAApC,EAAkDC,KAAlD;AACA,MAF6B,EAE3BC,KAF2B,CAA9B;AAGA;AACDkB,YAAQC,GAAR,CAAY,mBAAZ;AACA;AACA;AACA,QAAIvB,kBAAkBwB,qBAAtB,EAA6C;AAC5CxB,uBAAkByB,eAAlB,CAAkCzB,kBAAkBwB,qBAApD;AACAE,iBAAYC,UAAZ,CAAuB3B,kBAAkBwB,qBAAzC;AACAF,aAAQC,GAAR,CAAY,mBAAZ;AACA;;AAED;AACA,WAAO,IAAP;AACA;;;;;AAID;;;yBAGaK,K,EAAOC,O,EAASC,Q,EAC7B;AACC;AACA,QAAI,OAAOD,OAAP,KAAmB,UAAnB,IAAiC,OAAOC,QAAP,KAAoB,WAAzD,EACCA,WAAWD,OAAX;;AAED,QAAIE,SAASvB,SAASwB,aAAT,CAAuB,QAAvB,CAAb;AACAD,WAAOE,IAAP,GAAc,iBAAd;AACAF,WAAOG,KAAP,GAAe,IAAf;AACAH,WAAOI,gBAAP,CAAwB,MAAxB,EAAgC,YAAU;AACzCT,iBAAYU,WAAZ,CAAwBR,KAAxB,EAA+BC,WAAW,EAA1C;AACAC;AACA,KAHD;AAIAC,WAAOM,GAAP,GAAa,iDAAb;AACA7B,aAAS8B,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,WAAzC,CAAqDR,MAArD;AACA;;AAED;;;;;;kCAGsBS,I,EAAMC,K,EAAOC,I,EACnC;AACC,QAAIC,MAAM,EAACF,OAAMA,KAAP,EAAV;AACA,QAAIC,IAAJ,EAAUC,IAAID,IAAJ,GAAWA,IAAX;;AAEVF,SAAKI,YAAL,CAAkB,mBAAlB,EAAuCC,KAAKC,SAAL,CAAeH,GAAf,CAAvC;AACA;;AAED;;;;;;kCAGsBH,I,EACtB;AAAA,QAD4BO,KAC5B,uEADoC,IACpC;;AACC,QAAIC,QAAQD,QAAQP,KAAK/B,aAAL,CAAmBsC,KAAnB,CAAR,GAAoCP,IAAhD;AACA,WAAOQ,MAAMC,YAAN,CAAmB,mBAAnB,CAAP;AACA;;AAED;;;;;;+BAGmBC,G,EACnB;AACC,WAAO,qBAAWC,gBAAX,CAA4B3C,SAAS4C,QAAT,CAAkBC,IAA9C,EAAoDH,GAApD,CAAP;AACA;;AAED;;;;;;sCAG0BI,O,EAC1B;AACC,QAAIC,OAAOC,OAAOC,gBAAP,CAAwBH,OAAxB,CAAX;;AAEA,QAAIC,QAAQA,KAAKG,gBAAjB,EAAmC;AAClC,SAAIC,KAAKJ,KAAKG,gBAAL,CAAsB,kBAAtB,CAAT;AACA,SAAI,CAACC,EAAL,EAAS,OAAO,IAAP;AACT,YAAOA,GAAGC,OAAH,CAAW,4BAAX,EAAyC,IAAzC,CAAP;AACA,KAJD,MAIO;AACN,YAAO,IAAP;AACA;AACD;;AAED;;;;;;iCAGqBC,G,EAAKC,G,EAC1B;AACC,QAAIC,SAASvD,SAASwB,aAAT,CAAuB,KAAvB,CAAb;AACA+B,WAAOnB,YAAP,CAAoB,OAApB,EAA6B,wBAA7B;AACAmB,WAAOC,SAAP,GAAmB,aAAnB;AACAD,WAAO5B,gBAAP,CAAwB,OAAxB,EAAiC,UAAS8B,GAAT,EAAa;AAAEA,SAAIC,cAAJ;AAAuB,KAAvE;AACA,QAAIC,IAAIJ,OAAOK,KAAf;AACAD,MAAEE,MAAF,GAAW,SAAX;AACAF,MAAEG,OAAF,GAAY,UAAZ;AACAH,MAAEI,UAAF,GAAe,cAAf;AACAJ,MAAEK,OAAF,GAAY,GAAZ;AACAL,MAAEM,aAAF,GAAkB,MAAlB;AACAN,MAAEO,QAAF,GAAa,MAAb;AACAP,MAAEQ,KAAF,GAAU,MAAV;AACAR,MAAES,UAAF,GAAe,MAAf;AACAT,MAAEU,UAAF,GAAe,QAAf;;AAEA,QAAIhB,OAAOC,GAAX,EACC9D,kBAAkB8E,cAAlB,CAAiCf,MAAjC,EAAyCF,GAAzC,EAA8CC,GAA9C;;AAED,WAAOC,MAAP;AACA;;AAED;;;;;;;;qCAMA;AAAA,QADuBgB,IACvB,uEAD8B,yBAC9B;AAAA,QADyDC,UACzD,uEADsE,KACtE;;AACC,QAAIA,UAAJ,EACA;AACC,SAAI,OAAOD,IAAP,KAAgB,QAApB,EACC/E,kBAAkBwB,qBAAlB,GAA0CuD,IAA1C,CADD,KAGC,MAAM,IAAIjE,KAAJ,CAAU,0FAAV,CAAN;AACD;;AAGD,QAAI,OAAOiE,IAAP,KAAgB,QAApB,EACCA,OAAO1E,MAAM4E,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA4B3E,SAASK,gBAAT,CAA0BkE,IAA1B,CAA5B,CAAP,CADD,KAEK,IAAIA,gBAAgBK,QAApB,EACJL,OAAO1E,MAAM4E,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BJ,IAA3B,CAAP,CADI,KAEA,IAAI,CAAC1E,MAAMC,OAAN,CAAcyE,IAAd,CAAL,EACJA,OAAO,CAACA,IAAD,CAAP;;AAED/E,sBAAkBqF,QAAlB,GAA6BC,YAAYtF,kBAAkBqF,QAA9B,EAAwCN,IAAxC,CAA7B;;AAEA,QAAI,CAAC/E,kBAAkBuF,iBAAvB,EACA;AACC7D,iBAAYS,gBAAZ,CAA6B,cAA7B,EAA6C,YAAU;AACtDnC,wBAAkBwF,eAAlB,GAAoC,IAApC;AACAxF,wBAAkBqF,QAAlB,CAA2BhE,GAA3B,CAA+B,UAAS0C,MAAT,EAAgB;AAC9CA,cAAOK,KAAP,CAAaI,OAAb,GAAuB,GAAvB;AACAT,cAAOK,KAAP,CAAaK,aAAb,GAA6B,MAA7B;AACA,OAHD;AAIA,MAND;AAOA/C,iBAAYS,gBAAZ,CAA6B,cAA7B,EAA6C,YAAU;AACtDnC,wBAAkBwF,eAAlB,GAAoC,KAApC;AACAxF,wBAAkBqF,QAAlB,CAA2BhE,GAA3B,CAA+B,UAAS0C,MAAT,EAAgB;AAC9CA,cAAOK,KAAP,CAAaI,OAAb,GAAuB,GAAvB;AACAT,cAAOK,KAAP,CAAaK,aAAb,GAA6B,MAA7B;AACA,OAHD;AAIA,MAND;AAOAzE,uBAAkBuF,iBAAlB,GAAsC,IAAtC;AACA;;AAED;AACA,QAAIvF,kBAAkBwF,eAAtB,EAAuC;AACtCT,UAAK1D,GAAL,CAAS,kBAAU;AAClB0C,aAAOK,KAAP,CAAaI,OAAb,GAAuB,GAAvB;AACAT,aAAOK,KAAP,CAAaK,aAAb,GAA6B,MAA7B;AACA,MAHD;AAIA;;AAED;AACA,aAASa,WAAT,CAAqBG,EAArB,EAAyBC,EAAzB,EACA;AACC,SAAIC,IAAIF,GAAGG,MAAH,CAAUF,EAAV,CAAR;AACA,UAAI,IAAIG,IAAE,CAAV,EAAaA,IAAEF,EAAEG,MAAjB,EAAyB,EAAED,CAA3B;AACC,WAAI,IAAIE,IAAEF,IAAE,CAAZ,EAAeE,IAAEJ,EAAEG,MAAnB,EAA2B,EAAEC,CAA7B;AACC,WAAGJ,EAAEE,CAAF,MAASF,EAAEI,CAAF,CAAZ,EACCJ,EAAEK,MAAF,CAASD,GAAT,EAAc,CAAd;AAFF;AADD,MAKA,OAAOJ,CAAP;AACA;AACD;;;;;;AA1NI3F,kB,CA8DEe,O,GAAU,E;AA9DZf,kB,CA+DEmB,S,GAAY,I;AA/DdnB,kB,CA2NEwF,e,GAAkB,K;AA3NpBxF,kB,CA4NEwB,qB,GAAwB,I;AA5N1BxB,kB,CA6NEuF,iB,GAAoB,K;AA7NtBvF,kB,CA8NEqF,Q,GAAW,E;;;AAGnB7B,QAAOxD,iBAAP,GAA2BA,iBAA3B,C;;;;;;;;;;AC3OA;;AAEA;AACA,EAAC,UAASiG,IAAT,EAAe;AAChB;;AAEE,OAAIC,YAAY,mEAAhB;AACA,OAAIC,sBAAsB,mBAA1B;AACA,OAAIC,kBAAkB,mBAAtB;AACA,OAAIC,sBAAsB,oCAA1B;;AAEA,OAAIC,aAAa,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACAnD,uBAAkB,0BAASoD,OAAT,EAAkBC,WAAlB,EAA+BC,IAA/B,EAAqC;AACrDA,cAAOA,QAAQ,EAAf;AACA;AACAF,iBAAUA,QAAQG,IAAR,EAAV;AACAF,qBAAcA,YAAYE,IAAZ,EAAd;AACA,WAAI,CAACF,WAAL,EAAkB;AAChB;AACA;AACA;AACA,aAAI,CAACC,KAAKE,eAAV,EAA2B;AACzB,kBAAOJ,OAAP;AACD;AACD,aAAIK,wBAAwB,KAAKC,QAAL,CAAcN,OAAd,CAA5B;AACA,aAAI,CAACO,SAAL,EAAgB;AACd,iBAAM,IAAIhG,KAAJ,CAAU,iCAAV,CAAN;AACD;AACD8F,+BAAsBG,IAAtB,GAA6BT,WAAWU,aAAX,CAAyBJ,sBAAsBG,IAA/C,CAA7B;AACA,gBAAOT,WAAWW,iBAAX,CAA6BL,qBAA7B,CAAP;AACD;AACD,WAAIM,gBAAgB,KAAKL,QAAL,CAAcL,WAAd,CAApB;AACA,WAAI,CAACU,aAAL,EAAoB;AAClB,eAAM,IAAIpG,KAAJ,CAAU,qCAAV,CAAN;AACD;AACD,WAAIoG,cAAcC,MAAlB,EAA0B;AACxB;AACA;AACA,aAAI,CAACV,KAAKE,eAAV,EAA2B;AACzB,kBAAOH,WAAP;AACD;AACDU,uBAAcH,IAAd,GAAqBT,WAAWU,aAAX,CAAyBE,cAAcH,IAAvC,CAArB;AACA,gBAAOT,WAAWW,iBAAX,CAA6BC,aAA7B,CAAP;AACD;AACD,WAAIJ,YAAY,KAAKD,QAAL,CAAcN,OAAd,CAAhB;AACA,WAAI,CAACO,SAAL,EAAgB;AACd,eAAM,IAAIhG,KAAJ,CAAU,iCAAV,CAAN;AACD;AACD,WAAI,CAACgG,UAAUM,MAAX,IAAqBN,UAAUC,IAA/B,IAAuCD,UAAUC,IAAV,CAAe,CAAf,MAAsB,GAAjE,EAAsE;AACpE;AACA;AACA,aAAIM,YAAYlB,oBAAoBmB,IAApB,CAAyBR,UAAUC,IAAnC,CAAhB;AACAD,mBAAUM,MAAV,GAAmBC,UAAU,CAAV,CAAnB;AACAP,mBAAUC,IAAV,GAAiBM,UAAU,CAAV,CAAjB;AACD;AACD,WAAIP,UAAUM,MAAV,IAAoB,CAACN,UAAUC,IAAnC,EAAyC;AACvCD,mBAAUC,IAAV,GAAiB,GAAjB;AACD;AACD,WAAIQ,aAAa;AACf;AACA;AACAJ,iBAAQL,UAAUK,MAHH;AAIfC,iBAAQF,cAAcE,MAJP;AAKfL,eAAM,IALS;AAMfS,iBAAQN,cAAcM,MANP;AAOfC,gBAAOP,cAAcO,KAPN;AAQfC,mBAAUR,cAAcQ;AART,QAAjB;AAUA,WAAI,CAACR,cAAcE,MAAnB,EAA2B;AACzB;AACA;AACA;AACAG,oBAAWH,MAAX,GAAoBN,UAAUM,MAA9B;AACA;AACA;AACA,aAAIF,cAAcH,IAAd,CAAmB,CAAnB,MAA0B,GAA9B,EAAmC;AACjC,eAAI,CAACG,cAAcH,IAAnB,EAAyB;AACvB;AACA;AACAQ,wBAAWR,IAAX,GAAkBD,UAAUC,IAA5B;AACA;AACA;AACA;AACA,iBAAI,CAACG,cAAcM,MAAnB,EAA2B;AACzBD,0BAAWC,MAAX,GAAoBV,UAAUU,MAA9B;AACA;AACA;AACA;AACA,mBAAI,CAACN,cAAcO,KAAnB,EAA0B;AACxBF,4BAAWE,KAAX,GAAmBX,UAAUW,KAA7B;AACD;AACF;AACF,YAhBD,MAgBO;AACL;AACA;AACA;AACA;AACA,iBAAIE,cAAcb,UAAUC,IAA5B;AACA,iBAAIa,UAAUD,YAAYE,SAAZ,CAAsB,CAAtB,EAAyBF,YAAYG,WAAZ,CAAwB,GAAxB,IAA+B,CAAxD,IAA6DZ,cAAcH,IAAzF;AACAQ,wBAAWR,IAAX,GAAkBT,WAAWU,aAAX,CAAyBY,OAAzB,CAAlB;AACD;AACF;AACF;AACD,WAAIL,WAAWR,IAAX,KAAoB,IAAxB,EAA8B;AAC5BQ,oBAAWR,IAAX,GAAkBN,KAAKE,eAAL,GAAuBL,WAAWU,aAAX,CAAyBE,cAAcH,IAAvC,CAAvB,GAAsEG,cAAcH,IAAtG;AACD;AACD,cAAOT,WAAWW,iBAAX,CAA6BM,UAA7B,CAAP;AACD,MAtGc;AAuGfV,eAAU,kBAAS3D,GAAT,EAAc;AACtB,WAAI6E,QAAQ7B,UAAUoB,IAAV,CAAepE,GAAf,CAAZ;AACA,WAAI,CAAC6E,KAAL,EAAY;AACV,gBAAO,IAAP;AACD;AACD,cAAO;AACLZ,iBAAQY,MAAM,CAAN,KAAY,EADf;AAELX,iBAAQW,MAAM,CAAN,KAAY,EAFf;AAGLhB,eAAMgB,MAAM,CAAN,KAAY,EAHb;AAILP,iBAAQO,MAAM,CAAN,KAAY,EAJf;AAKLN,gBAAOM,MAAM,CAAN,KAAY,EALd;AAMLL,mBAAUK,MAAM,CAAN,KAAY;AANjB,QAAP;AAQD,MApHc;AAqHff,oBAAe,uBAASD,IAAT,EAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACAA,cAAOA,KAAKiB,KAAL,CAAW,EAAX,EAAeC,OAAf,GAAyBC,IAAzB,CAA8B,EAA9B,EAAkCtE,OAAlC,CAA0CwC,eAA1C,EAA2D,EAA3D,CAAP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAOW,KAAKjB,MAAL,KAAgB,CAACiB,OAAOA,KAAKnD,OAAL,CAAayC,mBAAb,EAAkC,EAAlC,CAAR,EAA+CP,MAAtE,EAA8E,CAAE,CAhBpD,CAgBqD;AACjF,cAAOiB,KAAKiB,KAAL,CAAW,EAAX,EAAeC,OAAf,GAAyBC,IAAzB,CAA8B,EAA9B,CAAP;AACD,MAvIc;AAwIfjB,wBAAmB,2BAASc,KAAT,EAAgB;AACjC,cAAOA,MAAMZ,MAAN,GAAeY,MAAMX,MAArB,GAA8BW,MAAMhB,IAApC,GAA2CgB,MAAMP,MAAjD,GAA0DO,MAAMN,KAAhE,GAAwEM,MAAML,QAArF;AACD;AA1Ic,IAAjB;;AA6IF;AACE,OAAG,gCAAOS,OAAP,OAAmB,QAAnB,IAA+B,gCAAOC,MAAP,OAAkB,QAApD,EACEA,OAAOD,OAAP,GAAiB7B,UAAjB,CADF,KAEK,IAAG,IAAH,EACH,iCAAO,EAAP,kCAAW,YAAW;AAAE,YAAOA,UAAP;AAAoB,IAA5C,gJADG,KAEA,IAAG,QAAO6B,OAAP,yCAAOA,OAAP,OAAmB,QAAtB,EACHA,QAAQ,YAAR,IAAwB7B,UAAxB,CADG,KAGHL,KAAK,YAAL,IAAqBK,UAArB;AACH,EA9JD;AA+JA,wB;;;;;;;;;AClKA8B,QAAOD,OAAP,GAAiB,UAASC,MAAT,EAAiB;AACjC,MAAG,CAACA,OAAOC,eAAX,EAA4B;AAC3BD,UAAOE,SAAP,GAAmB,YAAW,CAAE,CAAhC;AACAF,UAAOG,KAAP,GAAe,EAAf;AACA;AACAH,UAAOI,QAAP,GAAkB,EAAlB;AACAJ,UAAOC,eAAP,GAAyB,CAAzB;AACA;AACD,SAAOD,MAAP;AACA,EATD,C","file":"pollbuilder-inject.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c453bf597dd6e515467e","\r\n\r\n/*******************************************************\r\n * Copyright (C) 2016 PTP APP LLC - All Rights Reserved\r\n * Unauthorized copying of this file, in whole or in part, via any medium is strictly prohibited.\r\n * Proprietary and Confidential\r\n *******************************************************/\r\n\r\nimport URLToolkit from 'url-toolkit'\r\n\r\nclass PollBuilderInject\r\n{\r\n\t/**\r\n\t\tThe main mapping function for usage when injecting the poll builder into the page.\r\n\t*/\r\n\tstatic map(requirements, itemSelector, logic, intvl)\r\n\t{\r\n\t\t// figure out if page meets requirements and should have poll builder injected\r\n\t\tif (Array.isArray(requirements)) {\r\n\t\t\tif (!requirements.some(document.querySelector(sel)))\r\n\t\t\t\treturn false;\r\n\t\t} else if (typeof requirements === 'function') {\r\n\t\t\tif (!requirements())\r\n\t\t\t\treturn false;\r\n\t\t} else if (typeof requirements === 'string') {\r\n\t\t\tif (!document.querySelector(requirements))\r\n\t\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tif (!requirements)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// figure out what elements on the page are the items themselves\r\n\t\tvar items, item;\r\n\t\tif (Array.isArray(itemSelector))\r\n\t\t\titems = itemSelector;\r\n\t\telse if (typeof itemSelector === 'function')\r\n\t\t\titems = itemSelector();\r\n\t\telse if (typeof itemSelector === 'string')\r\n\t\t\titems = document.querySelectorAll(itemSelector);\r\n\t\telse\r\n\t\t\tthrow new Error('Invalid item selector value');\r\n\t\t\r\n\t\t// for every item run the logic supplied\r\n\t\tfor (item of items) {\r\n\t\t\tif (PollBuilderInject._mapped.indexOf(item) < 0) {\r\n\t\t\t\tPollBuilderInject._mapped.push(item);\r\n\t\t\t\tlogic(item);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// If an interval is supplied, check again on that interval.\r\n\t\t// This is specifically for the purpose of pages that load more\r\n\t\t// items dynamically, so that it can detect new items later.\r\n\t\tif (intvl) {\r\n\t\t\tclearInterval(PollBuilderInject._interval);\r\n\t\t\tPollBuilderInject._interval = setInterval(()=>{\r\n\t\t\t\tPollBuilderInject.map(requirements, itemSelector, logic);\r\n\t\t\t}, intvl)\r\n\t\t}\r\n\t\tconsole.log('should connect...')\r\n\t\t// if the buttons are set up and have instruction to automatically update every new mapping, then do so\r\n\t\t// this also connects the button to the poll builder, since by nature at this point the builder is already instantiated\r\n\t\tif (PollBuilderInject._buttonUpdateSelector) {\r\n\t\t\tPollBuilderInject.autoHideButtons(PollBuilderInject._buttonUpdateSelector);\r\n\t\t\tpollBuilder.addButtons(PollBuilderInject._buttonUpdateSelector);\r\n\t\t\tconsole.log('auto connected!!!')\r\n\t\t}\r\n\t\t\r\n\t\t// return true for success\r\n\t\treturn true;\r\n\t}\r\n\tstatic _mapped = [];\r\n\tstatic _interval = null;\r\n\t\r\n\t/**\r\n\t\tAdds the poll builder embedding script to the page, and then embeds sticky-style.\r\n\t*/\r\n\tstatic embed(token, options, callback)\r\n\t{\r\n\t\t// allow (token, callback) format if no options\r\n\t\tif (typeof options === 'function' && typeof callback === 'undefined')\r\n\t\t\tcallback = options;\r\n\t\t\r\n\t\tvar script = document.createElement('script');\r\n\t\tscript.type = 'text/javascript';\r\n\t\tscript.async = true;\r\n\t\tscript.addEventListener('load', function(){\r\n\t\t\tpollBuilder.embedSticky(token, options || {});\r\n\t\t\tcallback();\r\n\t\t});\r\n\t\tscript.src = 'https://scripts.gethyperr.com/desktop/latest.js';\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t}\r\n\t\r\n\t/**\r\n\t\tShortcut that can be used by the mapping logic functions for the adding of data element.\r\n\t*/\r\n\tstatic addDataElement(elem, image, link)\r\n\t{\r\n\t\tvar obj = {image:image};\r\n\t\tif (link) obj.link = link;\r\n\t\t\r\n\t\telem.setAttribute('data-poll-builder', JSON.stringify(obj));\r\n\t}\r\n\t\r\n\t/**\r\n\t\tChecks an element for the presence of the data element.\r\n\t*/\r\n\tstatic hasDataElement(elem, child = null)\r\n\t{\r\n\t\tvar check = child ? elem.querySelector(child) : elem;\r\n\t\treturn check.hasAttribute('data-poll-builder');\r\n\t}\r\n\t\r\n\t/**\r\n\t\tMakes a url such as `/folder/resource.ext` or `folder/resource.ext` and converts to proper absolute URL.\r\n\t*/\r\n\tstatic absoluteURL(url)\r\n\t{\r\n\t\treturn URLToolkit.buildAbsoluteURL(document.location.href, url);\r\n\t}\r\n\t\r\n\t/**\r\n\t\tReads a computed background url for an element (useful when finding an image url that's applied via CSS)\r\n\t*/\r\n\tstatic getBackgroundImage(element)\r\n\t{\r\n\t\tvar comp = window.getComputedStyle(element);\r\n\t\t\r\n\t\tif (comp && comp.getPropertyValue) {\r\n\t\t\tvar bg = comp.getPropertyValue('background-image');\r\n\t\t\tif (!bg) return null;\r\n\t\t\treturn bg.replace(/^\\s*?url\\(('|\")(.*)('|\")\\)/, '$2');\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\t\r\n\t}\r\n\t\r\n\t/**\r\n\t\tCreates a default template for an \"Add to Poll\" button and returns it.\r\n\t*/\r\n\tstatic defaultButton(img, lnk)\r\n\t{\r\n\t\tvar button = document.createElement('div');\r\n\t\tbutton.setAttribute('class', 'poll-builer-add-button');\r\n\t\tbutton.innerHTML = 'Add to Poll';\r\n\t\tbutton.addEventListener('click', function(evt){ evt.preventDefault(); });\r\n\t\tvar s = button.style;\r\n\t\ts.cursor = 'pointer';\r\n\t\ts.padding = '4px 10px';\r\n\t\ts.transition = 'opacity 0.4s';\r\n\t\ts.opacity = '0';\r\n\t\ts.pointerEvents = 'none';\r\n\t\ts.fontSize = '14px';\r\n\t\ts.color = '#fff';\r\n\t\ts.background = '#000';\r\n\t\ts.whiteSpace = 'nowrap';\r\n\t\t\r\n\t\tif (img && lnk)\r\n\t\t\tPollBuilderInject.addDataElement(button, img, lnk);\r\n\t\t\r\n\t\treturn button;\r\n\t}\r\n\t\r\n\t/**\r\n\t\tAutomatically sets up buttons (either as an array/nodelist of elements, a single element, or a query selector) to show/hide as poll builder does.\r\n\t\t@note - must ONLY be called after successful loading of the pollBuilder object/script (i.e. on the callback)\r\n\t\t@note - can be called multiple times to add more each time\r\n\t*/\r\n\tstatic autoHideButtons(btns = '.poll-builer-add-button', autoUpdate = false)\r\n\t{\r\n\t\tif (autoUpdate)\r\n\t\t{\r\n\t\t\tif (typeof btns === 'string')\r\n\t\t\t\tPollBuilderInject._buttonUpdateSelector = btns;\r\n\t\t\telse\r\n\t\t\t\tthrow new Error('To use autoUpdate you must supply a query selector string as the main button identifier.');\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (typeof btns === 'string')\r\n\t\t\tbtns = Array.prototype.slice.call( document.querySelectorAll(btns) );\r\n\t\telse if (btns instanceof NodeList)\r\n\t\t\tbtns = Array.prototype.slice.call(btns);\r\n\t\telse if (!Array.isArray(btns))\r\n\t\t\tbtns = [btns];\r\n\t\t\r\n\t\tPollBuilderInject._buttons = mergeArrays(PollBuilderInject._buttons, btns);\r\n\t\t\r\n\t\tif (!PollBuilderInject._buttonsListening)\r\n\t\t{\r\n\t\t\tpollBuilder.addEventListener(\"pb:maximized\", function(){\r\n\t\t\t\tPollBuilderInject._buttonsShowing = true;\r\n\t\t\t\tPollBuilderInject._buttons.map(function(button){\r\n\t\t\t\t\tbutton.style.opacity = '1';\r\n\t\t\t\t\tbutton.style.pointerEvents = 'auto';\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tpollBuilder.addEventListener(\"pb:minimized\", function(){\r\n\t\t\t\tPollBuilderInject._buttonsShowing = false;\r\n\t\t\t\tPollBuilderInject._buttons.map(function(button){\r\n\t\t\t\t\tbutton.style.opacity = '0';\r\n\t\t\t\t\tbutton.style.pointerEvents = 'none';\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tPollBuilderInject._buttonsListening = true;\r\n\t\t}\r\n\t\t\r\n\t\t// if is currently showing already, turn the recent additions on\r\n\t\tif (PollBuilderInject._buttonsShowing) {\r\n\t\t\tbtns.map(button => {\r\n\t\t\t\tbutton.style.opacity = '1';\r\n\t\t\t\tbutton.style.pointerEvents = 'auto';\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// private function\r\n\t\tfunction mergeArrays(a1, a2)\r\n\t\t{\r\n\t\t\tvar a = a1.concat(a2);\r\n\t\t\tfor(var i=0; i<a.length; ++i)\r\n\t\t\t\tfor(var j=i+1; j<a.length; ++j)\r\n\t\t\t\t\tif(a[i] === a[j])\r\n\t\t\t\t\t\ta.splice(j--, 1);\r\n\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n\tstatic _buttonsShowing = false;\r\n\tstatic _buttonUpdateSelector = null;\r\n\tstatic _buttonsListening = false;\r\n\tstatic _buttons = [];\r\n}\r\n\r\nwindow.PollBuilderInject = PollBuilderInject;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// see https://tools.ietf.org/html/rfc1808\r\n\r\n/* jshint ignore:start */\r\n(function(root) { \r\n/* jshint ignore:end */\r\n\r\n  var URL_REGEX = /^((?:[^\\/;?#]+:)?)(\\/\\/[^\\/\\;?#]*)?(.*?)??(;.*?)?(\\?.*?)?(#.*?)?$/;\r\n  var FIRST_SEGMENT_REGEX = /^([^\\/;?#]*)(.*)$/;\r\n  var SLASH_DOT_REGEX = /(?:\\/|^)\\.(?=\\/)/g;\r\n  var SLASH_DOT_DOT_REGEX = /(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/).*?(?=\\/)/g;\r\n\r\n  var URLToolkit = { // jshint ignore:line\r\n    // If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //\r\n    // E.g\r\n    // With opts.alwaysNormalize = false (default, spec compliant)\r\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g\r\n    // With opts.alwaysNormalize = true (default, not spec compliant)\r\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/g\r\n    buildAbsoluteURL: function(baseURL, relativeURL, opts) {\r\n      opts = opts || {};\r\n      // remove any remaining space and CRLF\r\n      baseURL = baseURL.trim();\r\n      relativeURL = relativeURL.trim();\r\n      if (!relativeURL) {\r\n        // 2a) If the embedded URL is entirely empty, it inherits the\r\n        // entire base URL (i.e., is set equal to the base URL)\r\n        // and we are done.\r\n        if (!opts.alwaysNormalize) {\r\n          return baseURL;\r\n        }\r\n        var basePartsForNormalise = this.parseURL(baseURL);\r\n        if (!baseParts) {\r\n          throw new Error('Error trying to parse base URL.');\r\n        }\r\n        basePartsForNormalise.path = URLToolkit.normalizePath(basePartsForNormalise.path);\r\n        return URLToolkit.buildURLFromParts(basePartsForNormalise);\r\n      }\r\n      var relativeParts = this.parseURL(relativeURL);\r\n      if (!relativeParts) {\r\n        throw new Error('Error trying to parse relative URL.');\r\n      }\r\n      if (relativeParts.scheme) {\r\n        // 2b) If the embedded URL starts with a scheme name, it is\r\n        // interpreted as an absolute URL and we are done.\r\n        if (!opts.alwaysNormalize) {\r\n          return relativeURL;\r\n        }\r\n        relativeParts.path = URLToolkit.normalizePath(relativeParts.path);\r\n        return URLToolkit.buildURLFromParts(relativeParts);\r\n      }\r\n      var baseParts = this.parseURL(baseURL);\r\n      if (!baseParts) {\r\n        throw new Error('Error trying to parse base URL.');\r\n      }\r\n      if (!baseParts.netLoc && baseParts.path && baseParts.path[0] !== '/') {\r\n        // If netLoc missing and path doesn't start with '/', assume everthing before the first '/' is the netLoc\r\n        // This causes 'example.com/a' to be handled as '//example.com/a' instead of '/example.com/a'\r\n        var pathParts = FIRST_SEGMENT_REGEX.exec(baseParts.path);\r\n        baseParts.netLoc = pathParts[1];\r\n        baseParts.path = pathParts[2];\r\n      }\r\n      if (baseParts.netLoc && !baseParts.path) {\r\n        baseParts.path = '/';\r\n      }\r\n      var builtParts = {\r\n        // 2c) Otherwise, the embedded URL inherits the scheme of\r\n        // the base URL.\r\n        scheme: baseParts.scheme,\r\n        netLoc: relativeParts.netLoc,\r\n        path: null,\r\n        params: relativeParts.params,\r\n        query: relativeParts.query,\r\n        fragment: relativeParts.fragment\r\n      };\r\n      if (!relativeParts.netLoc) {\r\n        // 3) If the embedded URL's <net_loc> is non-empty, we skip to\r\n        // Step 7.  Otherwise, the embedded URL inherits the <net_loc>\r\n        // (if any) of the base URL.\r\n        builtParts.netLoc = baseParts.netLoc;\r\n        // 4) If the embedded URL path is preceded by a slash \"/\", the\r\n        // path is not relative and we skip to Step 7.\r\n        if (relativeParts.path[0] !== '/') {\r\n          if (!relativeParts.path) {\r\n            // 5) If the embedded URL path is empty (and not preceded by a\r\n            // slash), then the embedded URL inherits the base URL path\r\n            builtParts.path = baseParts.path;\r\n            // 5a) if the embedded URL's <params> is non-empty, we skip to\r\n            // step 7; otherwise, it inherits the <params> of the base\r\n            // URL (if any) and\r\n            if (!relativeParts.params) {\r\n              builtParts.params = baseParts.params;\r\n              // 5b) if the embedded URL's <query> is non-empty, we skip to\r\n              // step 7; otherwise, it inherits the <query> of the base\r\n              // URL (if any) and we skip to step 7.\r\n              if (!relativeParts.query) {\r\n                builtParts.query = baseParts.query;\r\n              }\r\n            }\r\n          } else {\r\n            // 6) The last segment of the base URL's path (anything\r\n            // following the rightmost slash \"/\", or the entire path if no\r\n            // slash is present) is removed and the embedded URL's path is\r\n            // appended in its place.\r\n            var baseURLPath = baseParts.path;\r\n            var newPath = baseURLPath.substring(0, baseURLPath.lastIndexOf('/') + 1) + relativeParts.path;\r\n            builtParts.path = URLToolkit.normalizePath(newPath);\r\n          }\r\n        }\r\n      }\r\n      if (builtParts.path === null) {\r\n        builtParts.path = opts.alwaysNormalize ? URLToolkit.normalizePath(relativeParts.path) : relativeParts.path;\r\n      }\r\n      return URLToolkit.buildURLFromParts(builtParts);\r\n    },\r\n    parseURL: function(url) {\r\n      var parts = URL_REGEX.exec(url);\r\n      if (!parts) {\r\n        return null;\r\n      }\r\n      return {\r\n        scheme: parts[1] || '',\r\n        netLoc: parts[2] || '',\r\n        path: parts[3] || '',\r\n        params: parts[4] || '',\r\n        query: parts[5] || '',\r\n        fragment: parts[6] || ''\r\n      };\r\n    },\r\n    normalizePath: function(path) {\r\n      // The following operations are\r\n      // then applied, in order, to the new path:\r\n      // 6a) All occurrences of \"./\", where \".\" is a complete path\r\n      // segment, are removed.\r\n      // 6b) If the path ends with \".\" as a complete path segment,\r\n      // that \".\" is removed.\r\n      path = path.split('').reverse().join('').replace(SLASH_DOT_REGEX, '');\r\n      // 6c) All occurrences of \"<segment>/../\", where <segment> is a\r\n      // complete path segment not equal to \"..\", are removed.\r\n      // Removal of these path segments is performed iteratively,\r\n      // removing the leftmost matching pattern on each iteration,\r\n      // until no matching pattern remains.\r\n      // 6d) If the path ends with \"<segment>/..\", where <segment> is a\r\n      // complete path segment not equal to \"..\", that\r\n      // \"<segment>/..\" is removed.\r\n      while (path.length !== (path = path.replace(SLASH_DOT_DOT_REGEX, '')).length) {} // jshint ignore:line\r\n      return path.split('').reverse().join('');\r\n    },\r\n    buildURLFromParts: function(parts) {\r\n      return parts.scheme + parts.netLoc + parts.path + parts.params + parts.query + parts.fragment;\r\n    }\r\n  };\r\n\r\n/* jshint ignore:start */\r\n  if(typeof exports === 'object' && typeof module === 'object')\r\n    module.exports = URLToolkit;\r\n  else if(typeof define === 'function' && define.amd)\r\n    define([], function() { return URLToolkit; });\r\n  else if(typeof exports === 'object')\r\n    exports[\"URLToolkit\"] = URLToolkit;\r\n  else\r\n    root[\"URLToolkit\"] = URLToolkit;\r\n})(this);\r\n/* jshint ignore:end */\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/url-toolkit/src/url-toolkit.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js"],"sourceRoot":""}